<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="styles/main.css">
    <link rel="stylesheet" type="text/css" href="styles/format.css">
    <link rel="stylesheet" type="text/css" href="styles/flex-utils.css">
</head>

<body style="padding: 30px;">

<h2 class="mb-2">Übung 2 – Audiodateien erzeugen und einlesen</h2>

<!-- ################################################ AUFGABE 2 ################################################-->
<section class="group">
    <h3 class="mb-2">Aufgabe 1</h3>
    <!-- ############### 2.a ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 1.1</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Erzeuge aus den beiden JPG-Bildern, die dir geschickt wurden, Bitmap-Bilder (BMP) im Format 960x540
                Pixel, 24Bit. Die Konvertierung kann z.B. in Paint erfolgen.
                Benenne die Dateien "Nature_NameArbeitsgruppe.bmp" und Manmade_NameArbeitsgruppe.bmp". Schick mir die
                beiden BMP-Dateien unter Nennung deiner Arbeitsgruppe per Mail. In den folgenden Übungen wirst du diese
                Dateien oft als Ursprungsbilder verwenden. Sollten sie verloren gehen, kannst du sie notfalls wieder von
                mir erhalten. Darauf werde
                ich dir zwei BMP-Dateien mit Testbildern zusenden, die du bei den folgenden Aufgabenpunkten benötigst,
                gratingHXX.bmp und gratingVXX.bmp.
                <br>
                <br>
                Nun lies die Bilder mit bmp_io ein und erkläre die Angaben im Header, die auf der Konsole ausgegeben
                werden! Wie erklärt sich die Dateigröße für die beiden Dateien?
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <div class="row mb-2">
                <div>
                    <img src="pics/u2/1_1_1.png" alt=" " style="height: 200px" class="mb-2">
                    <img src="pics/u2/1_1_2.png" alt=" " style="height: 200px">
                </div>
                <div class="pl-2">
                    <p>Man kann sich ein Bild als Raster von Pixeln vorstellen.</p>
                    <p>
                        <b>Breite * Höhe:</b>
                        <br>
                        640 * 480 (307.200 Pixel)
                    </p>

                    <p>
                        <b>Bits pro Pixel:</b>
                        <br>
                        Ein Pixel setzt sich aus drei Werten zusammen, nämlich
                        <span style="color: #ff0000;">Rot</span>,
                        <span style="color: #00ff00;">Grün</span> und
                        <span style="color: #0000ff;">Blau</span>.
                        <br>
                        Jeder Wert wird mit 8 Bit dargestellt.
                        <br>
                        <i>Daher ergeben sich die 24 Bit im Header, (R: 8, G: 8, B: 8) -> 3 * 8 = 24</i>
                        <br>
                        <br>
                        (<b>Fun fact: </b>
                        Mit 8 Bits können 2^8 (256) verschiedene Zahlen dargestellt werden.
                        <br>
                        Das menschliche Auge kann zwischen ca. 200 verschieden Farbtönen unterscheiden!
                        <br>
                        Daher reichen 8 bit vollkommen aus! Dahingegen reicht die nächst kleinere
                        Bitzahl 2^7 (128) nicht aus.)
                    </p>

                    <p>
                        <b>Dateigröße:</b>
                        <br>
                        Beträgt bei beiden Bildern 921.654 Bits.
                        <br>
                        Oben haben wir gesehen, dass 640 * 480 = 307.200 Pixel ergeben!
                        <br>
                        Jedes Pixel ist 24 Bit groß. Also 3 * 8 Bits. <br>
                        8 Bits ergeben ein <b>Byte</b> ergo <u>ein Pixel = 3 Bytes</u>.
                        <br>
                        <br>
                        <i><b>3 * 307.200 = 921.600 Bytes</b></i>
                        <br>
                        Kommt ungefähr mit der Angabe im Header hin.
                        <br>
                        Es sind lediglich 54 Bytes zu viel, was daran liegt,
                        <br>
                        dass in einer BMP Datei nicht nur die Pixelwerte, sondern auch andere Daten und Metadaten
                        gespeichert werden (wie z.B. der Header selbst).
                    </p>
                </div>
            </div>
        </div>
    </article>
</section>

<!-- ################################################ AUFGABE 2 ################################################-->
<section class="group">
    <h3 class="mb-2">Aufgabe 2</h3>

    <!-- ############### 2.1 ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 2.1</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Modifiziere bmp_io dahingehend, dass die RGB Werte der einzelnen Pixel in der BMP-Datei in eine
                (lesbare) ASCII-Datei geschrieben werden. Es reichen dabei jeweils eine
                Zeile und eine Spalte! Lies die von mir geschickten Testdateien ein und schätze aus den resultierenden
                Zahlenfolgen die Periodendauer in Pixeln in horizontaler und vertikaler
                Richtung. (Jeweils eine Periode horizontal und eine vertikal für das Übungsprotokoll abspeichern).
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <div>
                <p>Unser Ergebnis:</p>
                <img src="pics/u2/2_1_3.png" alt="" class="mb-2" style="height: 50px">
                <img src="pics/u2/2_1_4.png" alt="" class="mb-2" style="height: 50px">

                <hr>

                <p>
                    Unser Algorithmus:
                </p>
                <img src="pics/u2/2_1_1.png" alt="" class="mb-2" style="width: 100%">
                <img src="pics/u2/2_1_2.png" alt="" class="mb-2" style="width: 75%">
            </div>
        </div>
    </article>

    <!-- ############### 2.2 ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 2.2</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Auch bei der Bildabtastung muss das sogenannte Abtasttheorem eingehalten werden. Wie lautet es und wie
                lässt sich der Grenzfall, für den es gerade noch gilt, illustrieren
                (Zeichnung !)?
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <p>
                Wie bei der ersten Abgabe in Aufgabe 2.c für Audio beschrieben wurde,
                ist das Abtasttheorem bei Bild das gleiche, nämlich:
                <br>
                <br>
                <i>Die Abtastfrequenz muss größer als das doppelte der Signal-Frequenz sein: </i>
                <b>fa < 2 * f</b>
                <br>
                <b>Wichtig bei Bild:</b> pro Periode (T) werden 2 Pixel dargestellt!
                <br>
                <br>
                Angenommen wir haben ein sehr großes Schwarz7Weiß Bild. Wir nehmen nun ein Teil von diesem Bild
                in dem ein gleichmäßiges Muster ist, was sich alle 8 Pixel wiederholt.
                <br>
                Man könnte sagen es hat eine Frequenz von 4.
                Wenn wir nun für <b>fa = 8</b>, also exakt das doppelte wählen, dann hätten wir folgendes Problem,
                und zwar das alle unsere Abtastpunkte einen Nullpunkt abtasten!
                <br>
                <br>
                <img src="pics/u2/2_2_1.jpg" alt="" style="width: 100%;">
            </p>
        </div>
    </article>

    <!-- ############### 2.3 ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 2.3</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Erzeuge aus deinen eigenen Farbbildern Graustufen-Bilder. Dazu muss der Helligkeitswert Y aus den
                RGB-Werten errechnet werden. Es gibt dafür verschiedene Ansätze.
                Nutze die Formel Y= 0,3 * R + 0,6 * G + 0,1 * B, die die Helligkeitsempfindlichkeit des Auges annähert.
                Mit diesem Y-Wert wird dann die R, G und B-Information überschrieben.
                Speichere die Graustufenbilder ab.
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <div class="mb-2">
                <img src="pics/u2/2_3_1.png" alt=" " height="220">
            </div>
            <div class="row">
                <div class="col-6 pr-2">
                    <img src="pics/u2/2_3_Manmade_FOOBAR_grayscale.bmp" alt=" " style="width: 100%">
                </div>
                <div class="col-6 pl-2">
                    <img src="pics/u2/2_3_Nature_FOOBAR_grayscale.bmp" alt=" " style="width: 100%">
                </div>
            </div>
        </div>
    </article>

    <!-- ############### 2.4 ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 2.4</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Erkläre, wie bei Bild- und Videoaufnahmen Aliasing entstehen kann. Ähnlich wie bei der 1. Übung am
                Audiosignal wollen wir auf das Bild ein Down-Sampling anwenden und
                sehen, wann dabei Aliasing auftritt. Beim Audiosignal haben wir jedes zweite Sample verworfen und damit
                die Abtastfrequenz halbiert. Beim Bild verringern wir die räumliche
                Auflösung, indem wir die Zahl der Bildzeilen bzw. Bildspalten verringern. Dabei wollen wir das Bild
                allerdings nicht verkleinern - was normalerweise die Folge wäre - sondern einfach
                die ungeradzahligen Spalten durch den Inhalt der geradzahligen Spalten ersetzen, d.h. Spalte 1 wird
                durch Spalte 0 ersetzt, Spalte 3 durch Spalte 2 etc. und analog für die Zeilen.
                Wenn das Ursprungsbild nun sehr feine Strukturen aufweist, wie in machen Testdateien, können
                Aliasing-Verzerrungen sichtbar werden. Achte darauf, dass stets Rot, Grün und
                Blau getrennt manipuliert werden müssen.
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <div class="row">
                <!-- TODO -->
            </div>
        </div>
    </article>

    <!-- ############### 2.5 ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 2.5</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Modifiziere bmp_io dahingehend, dass zunächst in jeder Zeile des eingelesenen Bilds jedes ungeradzahlige
                Pixel durch das davor liegende geradzahlige Pixel ersetzt wird
                (horizontales Down-Sampling). Diese Veränderung hat natürlich nur bei einem der beiden Testbilder Sinn
                (warum?). Speichere das resultierende Bild ab. Da sich die Bildgröße bei
                dieser Operation nicht ändert, muss der Bild-Header auch nicht verändert werden. Falls du im Ergebnis
                keine Veränderung sehen kannst, ersetze mehr Spalten, also Spalte 1 und 2
                durch Spalte 0, dann Spalte 1, 2 und 3 durch Spalte 0 usw. Wende diese Manipulation auf die Testbilder
                an, bis du eine Veränderung in Form eines Moiré-Musters siehst. Notiere,
                bei welcher Verringerung du die Veränderungen beobachtest und beschreibe die Veränderungen! Erkläre das
                Ergebnis an Hand der von dir bestimmten Periodendauer in Pixeln.
                <br>
                <br>
                Nun wende die Zeilenverringerung vertikal an, d.h. ersetze die Pixel jeder ungeradzahligen Zeile durch
                die der Zeile davor (vertikales Down-Sampling). Auch hier hat die
                Manipulation nur bei einer der Testdateien Sinn!
                <br>
                <br>
                Abschließend wendest du noch das horizontale Downsampling auf deine eigenen Bilder an, bis du eine
                sichtbare Verschlechterung beobachtest. Notiere auch hier, wann dies bei
                deinen beiden Bildern der Fall ist.
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <div class="row">
                <!-- TODO -->
            </div>
        </div>
    </article>
</section>

<!-- ################################################ AUFGABE 3 ################################################-->
<section class="group">
    <h3 class="mb-2">Aufgabe 3</h3>

    <!-- ############### 3.1 ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 3.1</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Wir wollen nun bmp_io so modifizieren, dass wir die Bitzahl reduzieren können. Dazu können wir z.B. alle
                RGB-Werte durch eine Potenz von 2 teilen (Integer-Division ohne
                Rest). Damit das resultierende Bild nicht dunkler wird als das Original, kompensieren wir die Operation
                durch Multiplikation mit derselben Zweierpotenz. Zu beachten: Der Datentyp
                hat nach wie vor eine Bittiefe von 24Bit (8bit pro Farbe!)
                <br>
                <br>
                (Denselben Effekt erreicht man auch durch einfaches logisches 'Verunden' mit einem entsprechenden
                HEX-Wert, indem man mit dem LSB beginnend Bits 'ausblendet'.)
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <div class="mb-2">
                <!-- TODO -->
            </div>
        </div>
    </article>

    <!-- ############### 3.2 ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 3.2</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Mit dem entstandenen Programm verändern wir die in Aufgabe 1 erzeugten BMP-Dateien. Ab welcher Bitzahl
                tritt beim Detail-Bild und beim Flächen-Bild eine sichtbare
                Verschlechterung der Qualität ein? Wie kann man diese Verschlechterung am besten beschreiben? (Alle
                Ergebnisbilder ins Übungsprotokoll)
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <div class="mb-2">
                <!-- TODO -->
            </div>
        </div>
    </article>

    <!-- ############### 3.3 ############### -->
    <article class="card mb-2">
        <div class="card-header">
            <h3>Aufgabe 3.3</h3>
        </div>
        <div class="card-body">
            <h4 class="mb-2">Aufgabestellung:</h4>
            <p>
                Modifiziere dein Programm noch einmal so, dass auch das Differenzbild zwischen Original und
                bitreduziertem Bild, das heißt das Fehlerbild ausgegeben, werden kann. Dabei
                musst du auch bedenken, dass z.B. bei 1 Bit Reduzierung der Fehler nur 0 oder 1 wäre. Dieser
                Wertebereich wäre viel zu klein, als dass man ihn in der 8bit-Grafik noch sehen
                könnte. Daher muss der Fehler durch Multiplikation mit einer 2er Potenz verstärkt werden. In anderen
                Worten: Hat man vorher durch 2^n geteilt, sollte man das Differenzsignal mit
                2^(8-n-1) multiplizieren. So ist sichergestellt, dass der Verstärkungsfaktor mit der Anzahl der
                gelöschten Bits kleiner wird. Beachte außerdem, dass bei der Differenzbildung der
                Wert 0 Schwarz entspricht, während die Null-Linie im Bild-Wertebereich 0...255 aber bei 128, d.h.
                Mittelgrau, liegt. Daher muss das Differenzbild vor dem Abspeichern durch
                Addition von 128 in diesen Bereich gebracht werden.
                (Bilder all dieser Fälle ins Übungsprotokoll)
            </p>

            <hr class="mb-2">

            <h4 class="mb-2">Lösung:</h4>
            <div class="mb-2">
                <!-- TODO -->
            </div>
        </div>
    </article>
</section>
</body>
</html>